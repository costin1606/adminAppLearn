<!DOCTYPE html>
<html>

<body>

	<script>
	var clients = {};
	var projects = {};
	var employees = {};

	function Client(id, name, country){
		this.id = id;
		this.name = name;
		this.country = country;
	}
	
	function Project(id, name, client){
		this.id = id;
		this.name = name;
		this.client = client;
	}
	
	function Employee(id, firstname, lastname, gender, projectsList){
		this.id = id;
		this.firstname = firstname;
		this.lastname = lastname;
		this.gender = gender;
		this.projectsList = projectsList;
	}
	
	function addClient(){
		var clientId = document.getElementById("clientId").value;
		var clientName = document.getElementById("clientName").value;
		var clientCountry = document.getElementById("clientCountry").value;
		
		var client = new Client(clientId,clientName,clientCountry);
		clients[clientId]=client;

		var table = document.getElementById("clientsTable");
		var row = table.insertRow(1);
			row.insertCell(0).innerHTML= client.id;
			row.insertCell(1).innerHTML= client.name;
			row.insertCell(2).innerHTML= client.country;
			
		var clientSelect = document.getElementById("projectClient");
		var option = document.createElement("option");
		option.text = client.name;
		option.value = client.id;
		clientSelect.add(option);
	}
	
	function addProject(){
		var projectId = document.getElementById("projectId").value;
		var projectName = document.getElementById("projectName").value;
		var projectClient = document.getElementById("projectClient").value;
	
		var project = new Project(projectId,projectName,clients[projectClient]);
		
		projects[projectId]=project;
		
		var table = document.getElementById("projectsTable");
		var row = table.insertRow(1);
			row.insertCell(0).innerHTML= project.id;
			row.insertCell(1).innerHTML= project.name;
			row.insertCell(2).innerHTML= project.client.name;
			
		var projectsSelect = document.getElementById("employeeProjects");
		var option = document.createElement("option");
		option.text = project.name;
		option.value = project.id;
		projectsSelect.add(option);
	}
	
	function addEmployee(){
		var employeeId = document.getElementById("employeeId").value;
		var employeeFirstName = document.getElementById("employeeFirstName").value;
		var employeeLastName = document.getElementById("employeeLastName").value;
		var employeeGender = document.getElementById("employeeGender").value;
		var select = document.getElementById("employeeProjects");
		var employeeProjects = [];
		for(var i=0;i<select.options.length;i++){
			 if(select.options[i].selected ==true){
				employeeProjects.push(projects[select.options[i].value]);
			 }
		}
		
		var employee = new Employee(employeeId,employeeFirstName,employeeLastName,employeeGender,employeeProjects);
		employees[employeeId]=employee;
		
		var table = document.getElementById("employeeTable");
		var row = table.insertRow(1);
			row.insertCell(0).innerHTML= employee.id;
			row.insertCell(1).innerHTML= employee.firstname;
			row.insertCell(2).innerHTML= employee.lastname;
			row.insertCell(3).innerHTML= employee.gender;
			
			var projectsNames = "";
			for (var i = 0; i < employee.projectsList.length; i++) {
				projectsNames += employee.projectsList[i].name + ";";
				alert(projectsNames);
			}
			row.insertCell(4).innerHTML= projectsNames;
	}

	</script>
	 Clients table:
	 <table id="clientsTable">
	  <tr>
		<th>id</th>
		<th>name</th>
		<th>country</th>
	  </tr>
	  <tr>
		<td><input id="clientId" /></td>
		<td><input id="clientName" /></td>
		<td><input id="clientCountry" /></td>
	  </tr>
	  <tr>
		<td><button id="addClient" type="button" onclick="addClient()">+Add</button></td>
	  </tr>
	</table> 
	
	<hr/>
	Projects table:
	<table id="projectsTable">
	  <tr>
		<th>id</th>
		<th>name</th>
		<th>client</th>
	  </tr>
	  <tr>
		<td><input id="projectId" /></td>
		<td><input id="projectName" /></td>
		<td><select id="projectClient" size="1"/></td>
	  </tr>
	  <tr>
		<td><button id="addProject" type="button" onclick="addProject()">+Add</button></td>
	  </tr>
	</table> 
	
	<hr/>
	Employee table:
	<table id="employeeTable">
	  <tr>
		<th>id</th>
		<th>firstname</th>
		<th>lastname</th>
		<th>gender</th>
		<th>projects</th>
	  </tr>
	  <tr>
		<td><input id="employeeId" /></td>
		<td><input id="employeeFirstName" /></td>
		<td><input id="employeeLastName" /></td>
		<td><input id="employeeGender" /></td>
		<td><select multiple id="employeeProjects" /></td>
	  </tr>
	  <tr>
		<td><button id="addEmployee" type="button" onclick="addEmployee()">+Add</button></td>
	  </tr>
	</table> 

</body>
</html>
